let header=document.querySelector(".header"),nav=document.querySelector(".nav"),mobileMenuBtn=document.createElement("button"),contactForm=document.getElementById("contactForm"),floatingCta=document.querySelector(".floating-cta");function setupMobileMenu(){mobileMenuBtn.className="nav__mobile-menu",mobileMenuBtn.innerHTML=`
        <span class="menu-icon"></span>
        <span class="sr-only">Toggle Menu</span>
    `,nav.insertBefore(mobileMenuBtn,nav.firstChild),mobileMenuBtn.addEventListener("click",()=>{nav.classList.toggle("nav--open"),mobileMenuBtn.classList.toggle("nav__mobile-menu--open"),document.body.classList.toggle("menu-open")})}function enableSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();e=document.querySelector(this.getAttribute("href"));e&&e.scrollIntoView({behavior:"smooth",block:"start"})})})}function handleStickyHeader(){let t=0;window.addEventListener("scroll",()=>{var e=window.pageYOffset;e<=0?header.classList.remove("header--hidden"):(e>t&&!header.classList.contains("header--hidden")?header.classList.add("header--hidden"):e<t&&header.classList.contains("header--hidden")&&header.classList.remove("header--hidden"),t=e)})}function setupLazyLoading(){var e;"loading"in HTMLImageElement.prototype?document.querySelectorAll('img[loading="lazy"]').forEach(e=>{e.src=e.dataset.src}):((e=document.createElement("script")).src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js",document.body.appendChild(e),e.onload=function(){lozad().observe()})}function setupFormHandling(){contactForm&&contactForm.addEventListener("submit",async e=>{e.preventDefault();var e=contactForm.querySelector('button[type="submit"]'),t=e.textContent,n=(e.textContent="Sending...",e.disabled=!0,new FormData(contactForm)),n=Object.fromEntries(n.entries());try{if(!(await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to send message");showNotification("Message sent successfully!","success"),contactForm.reset()}catch(e){showNotification("Failed to send message. Please try again.","error"),console.error("Form submission error:",e)}finally{e.textContent=t,e.disabled=!1}})}function showNotification(e,t="success"){let n=document.createElement("div");n.className="notification notification--"+t,n.textContent=e,document.body.appendChild(n),setTimeout(()=>n.classList.add("notification--visible"),100),setTimeout(()=>{n.classList.remove("notification--visible"),setTimeout(()=>n.remove(),300)},5e3)}function handleFloatingCTA(){if(floatingCta){let t,n=!1;window.addEventListener("scroll",()=>{t=window.scrollY,n||(window.requestAnimationFrame(()=>{var e=document.querySelector(".hero").offsetHeight;floatingCta.classList.toggle("floating-cta--visible",t>e),n=!1}),n=!0)})}}function setupAnalytics(){document.querySelectorAll(".btn").forEach(t=>{t.addEventListener("click",()=>{var e=t.textContent.trim();gtag("event","click",{event_category:"CTA",event_label:e})})}),contactForm&&contactForm.addEventListener("submit",()=>{gtag("event","submit",{event_category:"Form",event_label:"Contact Form"})})}function initialize(){setupMobileMenu(),enableSmoothScrolling(),handleStickyHeader(),setupLazyLoading(),setupFormHandling(),handleFloatingCTA(),setupAnalytics()}document.addEventListener("DOMContentLoaded",initialize);let styles=`
    .header--hidden {
        transform: translateY(-100%);
    }

    .nav__mobile-menu {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: var(--spacing-sm);
    }

    .menu-icon {
        display: block;
        width: 24px;
        height: 2px;
        background-color: var(--color-text);
        position: relative;
        transition: background-color var(--transition-fast);
    }

    .menu-icon::before,
    .menu-icon::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        background-color: var(--color-text);
        transition: transform var(--transition-fast);
    }

    .menu-icon::before { transform: translateY(-6px); }
    .menu-icon::after { transform: translateY(6px); }

    .nav__mobile-menu--open .menu-icon {
        background-color: transparent;
    }

    .nav__mobile-menu--open .menu-icon::before {
        transform: rotate(45deg);
    }

    .nav__mobile-menu--open .menu-icon::after {
        transform: rotate(-45deg);
    }

    .notification {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: var(--spacing-md) var(--spacing-lg);
        border-radius: var(--border-radius-md);
        background-color: white;
        box-shadow: var(--shadow-lg);
        transform: translateY(100%);
        opacity: 0;
        transition: all var(--transition-normal);
        z-index: 1100;
    }

    .notification--success {
        border-left: 4px solid #28a745;
    }

    .notification--error {
        border-left: 4px solid #dc3545;
    }

    .notification--visible {
        transform: translateY(0);
        opacity: 1;
    }

    .floating-cta {
        opacity: 0;
        transform: translateY(100%);
        transition: all var(--transition-normal);
    }

    .floating-cta--visible {
        opacity: 1;
        transform: translateY(0);
    }

    @media (max-width: 768px) {
        .nav__mobile-menu {
            display: block;
        }

        .nav__menu {
            display: none;
        }

        .nav--open .nav__menu {
            display: flex;
        }

        .menu-open {
            overflow: hidden;
        }
    }
`,styleSheet=document.createElement("style");styleSheet.textContent=styles,document.head.appendChild(styleSheet);